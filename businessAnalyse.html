<!DOCTYPE html>
<html lang="en">
<head>
    <title>互联网应用及终端分析</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html" charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <link href="./css/reset.css" type="text/css" rel="stylesheet">
    <link href="./css/index.css" type="text/css" rel="stylesheet">
    <link href="./css/businessAnalyse.css" type="text/css" rel="stylesheet">
</head>
<body style="overflow:hidden;">
<!--        主页内容-->
<section>
    <article>
        <header class="header">
            互联网应用及终端分析
            <div class="header_deadline">截至<b  id="current_time">13日11:00&nbsp;&nbsp;</b></div>
        </header>
        <div class="analyse_left">
            <div class="analyse_section">
                <div class="analyse_block1">
                    <p class="analyse_title">即时通讯</p>
                    <div id="divCanvas" class="canvas"></div>
                    <div style="margin-top: -64px;font-size: 13px;">
                        <div class="div_x_line"></div>
                        <div style="font-family: 'Arial','Microsoft YaHei','黑体','宋体',sans-serif;font-size: 10px;color: #ffffff;margin-left: 80px;margin-top: 10px;">
                            <table style="/* width:200px; */color:#ffffff;">
                                <tbody><tr>
                                    <td style="width:30px;height:21px;">速率</td>
                                    <td style="width:30px;height:21px;"><div style="background-color:#99FFCC;width:25px;height:18px;"></div></td>
                                    <td style="width:25px;height:21px;">时延</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-1.png"></div></td>
                                    <td style="width:40px;height:21px;">成功率</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-2.png"></div></td>
                                </tr>
                                </tbody></table>
                        </div>
                    </div>
                </div>
                <table class="analyse_block2 analyse_table">
                    <tr class="blue4">
                        <th>即时通讯</th>
                        <th>时延(S)</th>
                        <th>成功率(%)</th>
                        <th>下载速率（KPS）</th>
                    </tr>
                    <tr class="blue">
                        <td>飞信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue1">
                        <td>QQ</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue2">
                        <td>微信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="gray">
                        <td>阿里旺旺</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue3">
                        <td>陌陌</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                </table>
            </div>

            <div class="analyse_section" >
                <div class="analyse_block1">
                    <p class="analyse_title">浏览</p>
                    <div id="divCanvas1" class="canvas"></div>
                    <div style="margin-top: -64px;font-size: 13px;">
                        <div class="div_x_line"></div>
                        <div style="font-family: 'Arial','Microsoft YaHei','黑体','宋体',sans-serif;font-size: 10px;color: #ffffff;margin-left: 80px;margin-top: 10px;">
                            <table style="/* width:200px; */color:#ffffff;">
                                <tbody><tr>
                                    <td style="width:30px;height:21px;">速率</td>
                                    <td style="width:30px;height:21px;"><div style="background-color:#66CC00;width:25px;height:18px;"></div></td>
                                    <td style="width:25px;height:21px;">时延</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-1.png"></div></td>
                                    <td style="width: 40px;height:21px;">成功率</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-2.png"></div></td>
                                </tr>
                                </tbody></table>
                        </div>
                    </div>
                </div>
                <table class="analyse_block2 analyse_table">
                    <tr class="blue4">
                        <th>即时通讯</th>
                        <th>时延(S)</th>
                        <th>成功率(%)</th>
                        <th>下载速率（KPS）</th>
                    </tr>
                    <tr class="blue">
                        <td>飞信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue1">
                        <td>QQ</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue2">
                        <td>微信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="gray">
                        <td>阿里旺旺</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue3">
                        <td>陌陌</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="analyse_middle">
            <div style="margin-top: 40px">
                <p for="1" class="analyse_btn1" id="analyse_btn1">应用分析</p>
                <p for="2" class="analyse_btn2" id="analyse_btn2">终端分析</p>
            </div>
            <div id="divChart" class="circle_chart" style="margin-top: 40px;margin-left:-25px;"></div>
        </div>
        <div class="analyse_right">
            <div class="analyse_section" style="margin-left: 0%">
                <div class="analyse_block1">
                    <p class="analyse_title">视频</p>
                    <div id="divCanvas2" class="canvas"></div>
                    <div style="margin-top: -64px;font-size: 13px;">
                        <div class="div_x_line"></div>
                        <div style="font-family: 'Arial','Microsoft YaHei','黑体','宋体',sans-serif;font-size: 10px;color: #ffffff;margin-left: 80px;margin-top: 10px;">
                            <table style="/* width:200px; */color:#ffffff;">
                                <tbody><tr>
                                    <td style="width:30px;height:21px;">速率</td>
                                    <td style="width:30px;height:21px;"><div style="background-color:#FF66FF;width:25px;height:18px;"></div></td>
                                    <td style="width:25px;height:21px;">时延</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-1.png"></div></td>
                                    <td style="width: 40px;height:21px;">成功率</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-2.png"></div></td>
                                </tr>
                                </tbody></table>
                        </div>
                    </div>
                </div>
                <table class="analyse_block2 analyse_table">
                    <tr class="blue4">
                        <th>即时通讯</th>
                        <th>时延(S)</th>
                        <th>成功率(%)</th>
                        <th>下载速率（KPS）</th>
                    </tr>
                    <tr class="blue">
                        <td>飞信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue1">
                        <td>QQ</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue2">
                        <td>微信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="gray">
                        <td>阿里旺旺</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue3">
                        <td>陌陌</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                </table>
            </div>

            <div class="analyse_section" >
                <div class="analyse_block1">
                    <p class="analyse_title">音乐</p>
                    <div id="divCanvas3" class="canvas"></div>
                    <div style="margin-top: -64px;font-size: 13px;">
                        <div class="div_x_line"></div>
                        <div style="font-family: 'Arial','Microsoft YaHei','黑体','宋体',sans-serif;font-size: 10px;color: #ffffff;margin-left: 80px;margin-top: 10px;">
                            <table style="/* width:200px; */color:#ffffff;">
                                <tbody><tr>
                                    <td style="width:30px;height:21px;">速率</td>
                                    <td style="width:30px;height:21px;"><div style="background-color:#66CCFF;width:25px;height:18px;"></div></td>
                                    <td style="width:25px;height:21px;">时延</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-1.png"></div></td>
                                    <td style="width: 40px;height:21px;">成功率</td>
                                    <td style="width:30px;height:21px;"><div><img src="images/line_icon-p-2.png"></div></td>
                                </tr>
                                </tbody></table>
                        </div>
                    </div>
                </div>
                <table class="analyse_block2 analyse_table">
                    <tr class="blue4">
                        <th>即时通讯</th>
                        <th>时延(S)</th>
                        <th>成功率(%)</th>
                        <th>下载速率（KPS）</th>
                    </tr>
                    <tr class="blue">
                        <td>飞信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue1">
                        <td>QQ</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue2">
                        <td>微信</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="gray">
                        <td>阿里旺旺</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                    <tr class="blue3">
                        <td>陌陌</td>
                        <td>33</td>
                        <td>33</td>
                        <td>33</td>
                    </tr>
                </table>
            </div>
        </div>
    </article>
</section>
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/FusionCharts.js"></script>
<script defer="defer">
    window.onload = function(){

        var d = new Date();
        var m =d.getMonth()+1;
        var h = d.getHours()-1;
        var t = d.getDate();

        var hour = h;
        var daystr = t;
        var monthstr = m;

        if(h<10)
        {
            hour ="0"+h;
        }

        if(t<10)
        {
            daystr ="0"+t;
        }

        if(m<10)
        {
            monthstr ="0"+m;
        }

        document.getElementById("current_time").innerHTML = monthstr+"月"+daystr+"日"+hour+"时";

        //业务分析调用事件
        document.querySelector('.analyse_btn1').addEventListener('click',function(e){
            $(".analyse_btn1").css("background","url(./images/analyse_btn1.png)   no-repeat");
            $(".analyse_btn2").css("background","url(./images/analyse_btn2.png) no-repeat");
            changeType(1);
        });

        //终端分析调用事件
        document.querySelector('.analyse_btn2').addEventListener('click',function(e){
            $(".analyse_btn1").css("background","url(./images/analyse_btn2.png)  no-repeat");
            $(".analyse_btn2").css("background","url(./images/analyse_btn1.png)  no-repeat");
            changeType(2);
        });


        changeType(1);

    };

    function changeType(type)
    {
        var line_data = "";
        var circle_data = "";
        var titles_name = "";
        var tables_data = "";
        var divs = document.querySelectorAll('.canvas');
        var titles = document.querySelectorAll('.analyse_title');
        var tables = document.querySelectorAll('.analyse_table');
        var color_arg = "<%=color_str%>".split(",");
        var x_lines = document.querySelectorAll('.div_x_line');
        var tablestr = "<table style=\"width:250px;color:#ffffff;margin-left: 55px;text-align: center;\"><tr>";
        if(type == 1)
        {
            tables_data = [
                [["即时通讯","时延(ms)","成功率(%)","速率(Kbps)"],["微信","40","99.21","2500.47"],["QQ","42","98.61","1515.61"],["阿里旺旺","44","98.86","399.01"],["陌陌","42","98.02","900.14"],["飞信","48","98.50","1384.82"]],
                [["浏览","时延(ms)","成功率(%)","速率(Kbps)"],["腾讯网","64","99.29","978.59"],["网易网","102","99.92","3817.14"],["凤凰网","42","99.90","2245.68"],["搜狐网","68","100","263.02"],["人民网","87","99.82","1002.76"]],
                [["视频","时延(ms)","成功率(%)","速率(Kbps)"],["腾讯视频","46","99.85","6035.54"],["优酷视频","46","99.83","9098.43"],["爱奇艺","49","99.86","3819.51"],["手机电视","32","100","2741.24"],["迅雷看看","38","100","2773.35"]],
                [["音乐","时延(ms)","成功率(%)","速率(Kbps)"],["QQ音乐","48","99.73","1398.87"],["酷我音乐","47","99.81","7081.36"],["百度音乐","45","99.69","6222.19"],["唱吧","47","99.87","2718.01"],["天天动听","41","99.56","10326.43"]],
            ];

            line_data = [];
            //tables
            for(var i=0;i<tables.length;i++)
            {
                var chart_str = "<chart palette='1' plotSpacePercent='30' showValues='0' labelDisplay='Rotate' slantLabels='0'  numDivLines='3' divLineColor='#1385a5' formatNumberScale='0' plotFillAngle='0' plotFillRatio='50,50' plotGradientColor='EBEBEB' plotFillAlpha='90'"
                    +" yAxisValuesPadding='10' showLabels='0'   plotSpacePercent='10' baseFontColor='#ffffff' yAxisMinValue='80'   labelStep='2' showLegend='0' showBorder='0' canvasBgAlpha='0' bgAlpha='0,0,0' baseFontSize='16'  legendShadow='0'  showLegend='1' legendBgAlpha='0'  legendBorderAlpha='0'>"
                    +"<categories fontSize='0' labelPadding='0' >";
                var categories_str = "";
                var data_column = "<dataset seriesName='"+tables_data[i][0][3]+"'  color='"+color_arg[i]+"' >";
                var data_line_1 = "<dataset parentYAxis='S' seriesName='"+tables_data[i][0][1]+"'  color='"+color_arg[4]+"' >";
                var data_line_2 = "<dataset parentYAxis='S' seriesName='"+tables_data[i][0][2]+"'  color='"+color_arg[5]+"' >";
                var table_lenged_str = "";

                for(var j=1;j<6;j++)
                {
                    categories_str += "<category label='"+tables_data[i][j][0]+"'/>";

                    data_column += "<set value='"+tables_data[i][j][3]+"'/>";

                    data_line_1 += "<set value='"+tables_data[i][j][1]+"'/>";

                    data_line_2 += "<set value='"+tables_data[i][j][2].replace("%","")+"'/>";

                    table_lenged_str = table_lenged_str+"<td>"+tables_data[i][j][0]+"</td><td></td>";
                }

                categories_str += "</categories>";
                data_column += "</dataset>";
                data_line_1 += "</dataset>";
                data_line_2 += "</dataset>";

                chart_str += categories_str;
                chart_str += data_column;
                chart_str += data_line_1;
                chart_str += data_line_2;
                chart_str += "</chart>";

                table_lenged_str = table_lenged_str+"</tr></table>";
                x_lines[i].innerHTML=tablestr + table_lenged_str;
                table_lenged_str = "";

                line_data[i] = chart_str;

            }


            //扇形图
            circle_data = "<chart showPercentageValues='1' baseFont='微软雅黑' baseFontColor='#ffffff' showLegend='0' showBorder='0' canvasBgAlpha='0' bgAlpha='0,0,0' baseFontSize='13'>"
                +"<set label='视频' value='1552435'/>"
                +"<set label='浏览' value='1625017'/>"
                +"<set label='即时通信' value='2350995'/>"
                +"<set label='微博' value='86770.88'/>"
                +"<set label='购物' value='263357.9'/>"
                +"<set label='搜索' value='190815.1'/>"
                +"<set label='应用商店' value='124417.2'/>"
                +"<set label='音乐' value='342563.8'/>"
                +"<set label='其他' value='679089.7'/>"
                +"</chart>";

            titles_name = ["即时通讯","浏览","视频","音乐"];


        }
        else
        {
            tables_data = [
                [["联想","时延(ms)","成功率(%)","速率(Kbps)"],["A380t","62","97.60","2776.42"],["A788t","52","96.70","2669.88"],["A788t_TD","47","98.31","3075.36"],["A808t","47","96.58","4680.28"],["S810t","62","97.64","4468.97"]],
                [["苹果","时延(ms)","成功率(%)","速率(Kbps)"],["iPhone 5C","53","98.28","5187.76"],["iPhone 5S","44","98.66","4884.18"],["iPhone 6","41","98.56","4893.63"],["iPhone 6 Plus","39","98.56","4904.56"],["iPhone 6 Plus移动版","38","98.69","5899.74"]],
                [["OPPO","时延(ms)","成功率(%)","速率(Kbps)"],["N5117","51","95.63","1931.46"],["R2017","51","96.43","4078.17"],["R8007","48","96.85","3808.82"],["R831S","58","97.93","2618.26"],["X9007","74","96.28","1832.63"]],
                [["酷派","时延(ms)","成功率(%)","速率(Kbps)"],["8702","53","98.01","2141.93"],["8705","53","97.27","3350.77"],["8720L","54","97.38","2947.15"],["8729","62","96.97","3212.22"],["8730L","56","96.04","2289.29"]],
            ];
            line_data = [];
            //tables
            for(var i=0;i<tables.length;i++)
            {
                var chart_str = "<chart palette='1' plotSpacePercent='30' showValues='0' labelDisplay='Rotate' slantLabels='0'  numDivLines='3' divLineColor='#1385a5' formatNumberScale='0' plotFillAngle='0' plotFillRatio='50,50' plotGradientColor='EBEBEB' plotFillAlpha='90'"
                    +" yAxisValuesPadding='10' showLabels='0'   plotSpacePercent='10' baseFontColor='#ffffff' yAxisMinValue='80'   labelStep='2' showLegend='0' showBorder='0' canvasBgAlpha='0' bgAlpha='0,0,0' baseFontSize='16'  legendShadow='0'  showLegend='1' legendBgAlpha='0'  legendBorderAlpha='0'>"
                    +"<categories fontSize='0' labelPadding='0' >";
                var categories_str = "";
                var data_column = "<dataset seriesName='"+tables_data[i][0][3]+"'  color='"+color_arg[i]+"' >";
                var data_line_1 = "<dataset parentYAxis='S' seriesName='"+tables_data[i][0][1]+"'  color='"+color_arg[4]+"' >";
                var data_line_2 = "<dataset parentYAxis='S' seriesName='"+tables_data[i][0][2]+"'  color='"+color_arg[5]+"' >";
                var table_lenged_str = "";
                for(var j=1;j<6;j++)
                {
                    categories_str += "<category label='"+tables_data[i][j][0]+"'/>";

                    data_column += "<set value='"+tables_data[i][j][3]+"'/>";

                    data_line_1 += "<set value='"+tables_data[i][j][1]+"'/>";

                    data_line_2 += "<set value='"+tables_data[i][j][2].replace("%","")+"'/>";

                    table_lenged_str = table_lenged_str+"<td>"+tables_data[i][j][0]+"</td><td></td>";
                }

                categories_str += "</categories>";
                data_column += "</dataset>";
                data_line_1 += "</dataset>";
                data_line_2 += "</dataset>";

                chart_str += categories_str;
                chart_str += data_column;
                chart_str += data_line_1;
                chart_str += data_line_2;
                chart_str += "</chart>";

                table_lenged_str = table_lenged_str+"</tr></table>";
                x_lines[i].innerHTML=tablestr + table_lenged_str;
                table_lenged_str = "";

                line_data[i] = chart_str;
            }

            //扇形图
            circle_data = "<chart showPercentageValues='1' baseFont='微软雅黑' baseFontColor='#ffffff' showLegend='0' showBorder='0' canvasBgAlpha='0' bgAlpha='0,0,0' baseFontSize='13'>"
                +"<set label='联想' value='331596' />"
                +"<set label='苹果' value='292923' />"
                +"<set label='OPPO' value='219329' />"
                +"<set label='酷派' value='210251' />"
                +"<set label='三星' value='204579' />"
                +"<set label='小米' value='189969' />"
                +"<set label='步步高' value='158343' />"
                +"<set label='华为' value='149439' />"
                +"<set label='中兴' value='117127' />"
                +"<set label='其他' value='341376' />"
                +"</chart>";

            titles_name = ["联想","苹果","OPPO","酷派"];


        }

        //柱形图
        for(var i=0;i<divs.length;i++){
            var win ={width:divs[i].clientWidth,height:divs[i].clientHeight};
            var chart = new FusionCharts("./Charts/MSColumn3DLineDY.swf", "canvasDivChartId"+i, divs[i].clientWidth, divs[i].clientHeight-60, "0", "1", "FFFFFF", "exactFit");
            chart.setDataXML(line_data[i]);
            chart.render(divs[i].id);
        }
        //扇形图
        var circleDiv = document.querySelector('.circle_chart');
        var doughnut2D = new FusionCharts( "./Charts/Doughnut2D.swf", "doughnut2DId", circleDiv.clientWidth+50, circleDiv.clientWidth-80, "0" );
        doughnut2D.setDataXML(circle_data);
        doughnut2D.render("divChart");



        //titles
        for(var i=0;i<titles.length;i++){
            titles[i].innerHTML=titles_name[i];
        }

        var tables_css = ["blue4","blue","blue1","blue2","gray","blue3"];

        //tables
        for(var i=0;i<tables.length;i++){

            var tables_str = "";

            for(var j=0;j<6;j++)
            {
                var tr_str = "<tr class='"+tables_css[j]+"'>";

                for(var k=0;k<4;k++)
                {
                    tr_str += "<th>" + tables_data[i][j][k] + "</th>";
                }

                tables_str += tr_str + "</tr>";
            }

            tables[i].innerHTML=tables_str;
        }
    }

    /*刷新页面大小*/
    function refresh(){
        var divs = document.querySelectorAll('.canvas');
        for(var i=0;i<divs.length;i++){
            charts[i].resize(divs[i].clientWidth,divs[i].clientHeight);
        }

        var circleDiv = document.querySelector('.circle_chart');
        circle.resize(circleDiv.clientWidth,circleDiv.clientHeight);
    }

    /*刷新页面大小*/
    var isResize = false;
    window.onresize=function(){
        if(!isResize){
            isResize = !isResize;
        }else{
            return;
        }
        setTimeout(function(){refresh();isResize=false;},2000);
    }
</script>
</body>
</html>